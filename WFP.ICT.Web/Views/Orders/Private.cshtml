@using System.Collections
@using MyToolkit.Html
@model WFP.ICT.Web.Models.OrderVm
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .help-block-error {
        color: red !important;
    }
</style>
<!-- BEGIN CONTENT -->
<div class="page-content-wrapper">
    <!-- BEGIN CONTENT BODY -->
    <div class="page-content">
        <!-- BEGIN PAGE BASE CONTENT -->
        <div class="row">
            <div class="col-md-12 ">
                <!-- BEGIN SAMPLE FORM PORTLET-->

                @using (Ajax.BeginForm("Save", "Orders", null, new AjaxOptions { HttpMethod = "POST", OnSuccess = "pianoConfigs.initFormComplete(data)", OnBegin = "return pianoConfigs.initFormBegin()" }, new
                {
                    @id = "frm"

                }))
                {
                    @Html.HiddenFor(x => x.Id)
                    <div class="portlet light bordered">
                        <!-- box purple-->
                        <div class="portlet-title">
                            <div class="caption font-red-sunglo">
                                <span class="caption-subject bold uppercase"> @(string.IsNullOrEmpty(Model.Id) ? "New" : "Edit") Move Order</span>
                            </div>
                            <div class="actions">
                                <a class="btn btn-circle btn-icon-only btn-default fullscreen" href="javascript:;" data-original-title="" title=""> </a>
                            </div>
                        </div>

                        <div class="portlet-body form">
                            <div class="form-body">
                                <div class="tabbable-line">
                                    <ul class="nav nav-tabs ">
                                        <li class="active">
                                            <a href="#tab_15_1" data-toggle="tab"> Details </a>
                                        </li>
                                        <li>
                                            <a href="#tab_15_2" data-toggle="tab"> Units </a>
                                        </li>
                                        <li>
                                            <a href="#tab_15_3" data-toggle="tab"> Charges </a>
                                        </li>
                                    </ul>
                                    <div class="tab-content">
                                        <div class="tab-pane active" id="tab_15_1">
                                            <div class="row">
                                                <div class="col-md-12">


                                                    <div class="col-md-4">
                                                        <div class="form-group form-md-line-input has-success">
                                                            <div class="input-icon">
                                                                @Html.EditorFor(model => model.CallerFirstName, new { htmlAttributes = new { @class = "form-control" } })
                                                                <label>First Name</label>
                                                                @Html.ValidationMessageFor(model => model.CallerFirstName, null, new { @class = "help-block help-block-error" })
                                                                <span class="help-block">Enter First Name</span>
                                                                <i class="fa fa-user"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class="form-group form-md-line-input has-success">
                                                            <div class="input-icon">
                                                                @Html.EditorFor(model => model.CallerLastName, new { htmlAttributes = new { @class = "form-control" } })
                                                                <label>Last Name<span class="required">*</span></label>
                                                                @Html.ValidationMessageFor(model => model.CallerLastName, null, new { @class = "help-block help-block-error" })
                                                                <span class="help-block">Enter Last Name</span>
                                                                <i class="fa fa-user"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class="form-group form-md-line-input has-success">
                                                            <div class="input-icon">
                                                                @Html.EditorFor(model => model.CallerPhoneNumber, new { htmlAttributes = new { @class = "form-control" } })
                                                                <label>Via Phone Number<span class="required">*</span></label>
                                                                @Html.ValidationMessageFor(model => model.CallerPhoneNumber, null, new { @class = "help-block help-block-error" })
                                                                <span class="help-block">Enter Phone Number</span>
                                                                <i class="fa fa-phone"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="col-md-4">
                                                        <div class="form-group form-md-line-input has-success">
                                                            <div class="input-icon">
                                                                @Html.EditorFor(model => model.CallerAlternatePhone, new { htmlAttributes = new { @class = "form-control" } })
                                                                <label>Alternate Phone Number</label>
                                                                <span class="help-block">Enter Alternate Number</span>
                                                                <i class="fa fa-phone"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <div class="form-group form-md-line-input has-success">
                                                            <div class="input-icon">
                                                                @Html.EditorFor(model => model.CallerEmail, new { htmlAttributes = new { @class = "form-control" } })
                                                                <label>Via Email Address<span class="required">*</span></label>
                                                                @Html.ValidationMessageFor(model => model.CallerEmail, null, new { @class = "help-block help-block-error" })                                                                <span class="help-block">Enter Email Address</span>
                                                                <span class="help-block">Enter Email Address</span>
                                                                <i class="fa fa-envelope-o"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Pickup Delivery -->
                                            <div class="row" style="margin-top: 5px">
                                                <div class="col-md-6">

                                                    <div class="portlet light bordered">
                                                        <div class="portlet-title">
                                                            <div class="caption font-blue-steel">
                                                                <i class="icon-settings font-blue-steel"></i>
                                                                <span class="caption-subject bold uppercase"> Pickup Adddress</span>
                                                            </div>
                                                            <div class="actions">
                                                                <a class="btn btn-circle btn-icon-only btn-default fullscreen" href="javascript:;" data-original-title="" title=""> </a>
                                                            </div>
                                                        </div>
                                                        <div class="portlet-body form">
                                                            <div class="form-body">
                                                                <!--Pickup Address-->
                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.PickupAddress.PickUpDate, new { htmlAttributes = new { @class = "form-control date-picker" } })
                                                                                <label>Date<span class="required">*</span></label>
                                                                                @Html.ValidationMessageFor(model => model.PickupAddress.PickUpDate, null, new { @class = "help-block help-block-error" })
                                                                                <span class="help-block">Enter Date here</span>
                                                                                <i class="fa fa-user"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.DropDownListFor(model => model.PickupAddress.Warehouse, ViewBag.Warehouses as SelectList, null, htmlAttributes: new { @class = "form-control", onchange = "pianoConfigs.initPopulateWarehouse(this)" })
                                                                                <label>Warehouse<span class="required">*</span></label>
                                                                                @Html.ValidationMessageFor(model => model.PickupAddress.Warehouse, null, new { @class = "help-block help-block-error" })
                                                                                <span class="help-block">Enter Warehouse here</span>
                                                                                <i class="fa fa-home"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.PickupAddress.Name, new { htmlAttributes = new { @class = "form-control pianoName" } })
                                                                                <label>Name<span class="required">*</span></label>
                                                                                @Html.ValidationMessageFor(model => model.PickupAddress.Name, null, new { @class = "help-block help-block-error" })
                                                                                <span class="help-block">Enter Name here</span>
                                                                                <i class="fa fa-user"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.PickupAddress.PhoneNumber, new { htmlAttributes = new { @class = "form-control pianoPhone" } })
                                                                                <label>Contact<span class="required">*</span></label>
                                                                                @Html.ValidationMessageFor(model => model.PickupAddress.PhoneNumber, null, new { @class = "help-block help-block-error" })
                                                                                <span class="help-block">Enter Phone here</span>
                                                                                <i class="fa fa-home"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.PickupAddress.AlternateContact, new { htmlAttributes = new { @class = "form-control pianoAltName" } })
                                                                                <label>Alternate Contact</label>
                                                                                <span class="help-block">Enter Alternate Contact here</span>
                                                                                <i class="fa fa-home"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.PickupAddress.AlternatePhone, new { htmlAttributes = new { @class = "form-control pianoAltPhone" } })
                                                                                <label>Alternate Phone</label>
                                                                                <span class="help-block">Enter Alternate Phone here</span>
                                                                                <i class="fa fa-home"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.PickupAddress.Address1, new { htmlAttributes = new { @class = "form-control pianoAddress" } })
                                                                                <label>Address<span class="required">*</span></label>
                                                                                @Html.ValidationMessageFor(model => model.PickupAddress.Address1, null, new { @class = "help-block help-block-error" })
                                                                                <span class="help-block">Enter Address here</span>
                                                                                <i class="fa fa-home"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-3">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.PickupAddress.City, new { htmlAttributes = new { @class = "form-control pianoCity" } })
                                                                                <label>City<span class="required">*</span></label>
                                                                                @Html.ValidationMessageFor(model => model.PickupAddress.City, null, new { @class = "help-block help-block-error" })
                                                                                <span class="help-block">Enter PostCode</span>
                                                                                <i class="fa fa-home"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-3">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.PickupAddress.PostCode, new { htmlAttributes = new { @class = "form-control pianoPostCode" } })
                                                                                <label>Zip Code<span class="required">*</span></label>
                                                                                @Html.ValidationMessageFor(model => model.PickupAddress.PostCode, null, new { @class = "help-block help-block-error" })
                                                                                <span class="help-block">Enter Zip Code</span>
                                                                                <i class="fa fa-phone"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.DropDownListFor(model => model.PickupAddress.State, ViewBag.AddressStates as SelectList, htmlAttributes: new { @class = "form-control pianoState" })
                                                                                <label>State <span class="required">*</span></label>
                                                                                @Html.ValidationMessageFor(model => model.PickupAddress.State, null, new { @class = "help-block help-block-error" })
                                                                                <span class="help-block">Enter City Number here</span>
                                                                                <i class="fa fa-phone"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.PickupAddress.Stairs, new { htmlAttributes = new { @class = "form-control pianoStairs" } })
                                                                                <label>Stairs</label>
                                                                                <span class="help-block">Enter  Stairs here</span>
                                                                                <i class="fa fa-home"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.PickupAddress.Turns, new { htmlAttributes = new { @class = "form-control pianoTurns" } })
                                                                                <label>Turns</label>
                                                                                <span class="help-block">Enter Turns here</span>
                                                                                <i class="fa fa-home"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>

                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.PickupAddress.Notes, new { htmlAttributes = new { @class = "form-control" } })
                                                                                <label>Instructions</label>
                                                                                <span class="help-block">Enter Instructions Here</span>
                                                                                <i class="fa fa-home"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <!--Delivery Address-->
                                                    <div class="portlet light bordered">
                                                        <div class="portlet-title">
                                                            <div class="caption font-blue-steel">
                                                                <i class="icon-settings font-blue-steel"></i>
                                                                <span class="caption-subject bold uppercase"> Delivery Adddress</span>
                                                            </div>
                                                            <div class="actions">
                                                                <a class="btn btn-circle btn-icon-only btn-default fullscreen" href="javascript:;" data-original-title="" title=""> </a>
                                                            </div>
                                                        </div>

                                                        <div class="portlet-body form">
                                                            <div class="form-body">
                                                                <!--Pickup Address-->
                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.DeliveryAddress.PickUpDate, new { htmlAttributes = new { @class = "form-control date-picker" } })
                                                                                <label>Date<span class="required">*</span></label>
                                                                                @Html.ValidationMessageFor(model => model.DeliveryAddress.PickUpDate, null, new { @class = "help-block help-block-error" })
                                                                                <span class="help-block">Enter Date here</span>
                                                                                <i class="fa fa-user"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.DropDownListFor(model => model.DeliveryAddress.Warehouse, ViewBag.Warehouses as SelectList, null, htmlAttributes: new { @class = "form-control", onchange = "pianoConfigs.initPopulateWarehouse(this)" })
                                                                                <label>Warehouse<span class="required">*</span></label>
                                                                                @Html.ValidationMessageFor(model => model.DeliveryAddress.Warehouse, null, new { @class = "help-block help-block-error" })
                                                                                <span class="help-block">Enter Warehouse here</span>
                                                                                <i class="fa fa-home"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.DeliveryAddress.Name, new { htmlAttributes = new { @class = "form-control pianoName" } })
                                                                                <label>Name<span class="required">*</span></label>
                                                                                @Html.ValidationMessageFor(model => model.DeliveryAddress.Name, null, new { @class = "help-block help-block-error" })
                                                                                <span class="help-block">Enter Name here</span>
                                                                                <i class="fa fa-user"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.DeliveryAddress.PhoneNumber, new { htmlAttributes = new { @class = "form-control pianoPhone" } })
                                                                                <label>Contact<span class="required">*</span></label>
                                                                                @Html.ValidationMessageFor(model => model.DeliveryAddress.PhoneNumber, null, new { @class = "help-block help-block-error" })
                                                                                <span class="help-block">Enter Phone here</span>
                                                                                <i class="fa fa-home"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.DeliveryAddress.AlternateContact, new { htmlAttributes = new { @class = "form-control pianoAltName" } })
                                                                                <label>Alternate Contact</label>
                                                                                <span class="help-block">Enter Alternate Contact here</span>
                                                                                <i class="fa fa-home"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.DeliveryAddress.AlternatePhone, new { htmlAttributes = new { @class = "form-control pianoAltPhone" } })
                                                                                <label>Alternate Phone</label>
                                                                                <span class="help-block">Enter Alternate Phone here</span>
                                                                                <i class="fa fa-home"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.DeliveryAddress.Address1, new { htmlAttributes = new { @class = "form-control pianoAddress" } })
                                                                                <label>Address<span class="required">*</span></label>
                                                                                @Html.ValidationMessageFor(model => model.DeliveryAddress.Address1, null, new { @class = "help-block help-block-error" })
                                                                                <span class="help-block">Enter Address here</span>
                                                                                <i class="fa fa-home"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-3">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.DeliveryAddress.City, new { htmlAttributes = new { @class = "form-control pianoCity" } })
                                                                                <label>City<span class="required">*</span></label>
                                                                                @Html.ValidationMessageFor(model => model.DeliveryAddress.City, null, new { @class = "help-block help-block-error" })
                                                                                <span class="help-block">Enter PostCode</span>
                                                                                <i class="fa fa-home"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-3">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.DeliveryAddress.PostCode, new { htmlAttributes = new { @class = "form-control pianoPostCode" } })
                                                                                <label>Zip Code<span class="required">*</span></label>
                                                                                @Html.ValidationMessageFor(model => model.DeliveryAddress.PostCode, null, new { @class = "help-block help-block-error" })
                                                                                <span class="help-block">Enter Zip Code</span>
                                                                                <i class="fa fa-phone"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.DropDownListFor(model => model.DeliveryAddress.State, ViewBag.AddressStates as SelectList, htmlAttributes: new { @class = "form-control pianoState" })
                                                                                <label>State <span class="required">*</span></label>
                                                                                @Html.ValidationMessageFor(model => model.DeliveryAddress.State, null, new { @class = "help-block help-block-error" })
                                                                                <span class="help-block">Enter City Number here</span>
                                                                                <i class="fa fa-phone"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.DeliveryAddress.Stairs, new { htmlAttributes = new { @class = "form-control pianoStairs" } })
                                                                                <label>Stairs</label>
                                                                                <span class="help-block">Enter  Stairs here</span>
                                                                                <i class="fa fa-home"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.DeliveryAddress.Turns, new { htmlAttributes = new { @class = "form-control pianoTurns" } })
                                                                                <label>Turns</label>
                                                                                <span class="help-block">Enter Turns here</span>
                                                                                <i class="fa fa-home"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>

                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <div class="form-group form-md-line-input has-success">
                                                                            <div class="input-icon">
                                                                                @Html.EditorFor(model => model.DeliveryAddress.Notes, new { htmlAttributes = new { @class = "form-control" } })
                                                                                <label>Instructions</label>
                                                                                <span class="help-block">Enter Instructions Here</span>
                                                                                <i class="fa fa-home"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                        </div>
                                                    </div>

                                                </div>

                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="col-md-6">
                                                        <div class="form-group form-md-line-input has-success">
                                                            <div class="input-icon">
                                                                @Html.DropDownListFor(model => model.Shuttle, ViewBag.Customers as SelectList, htmlAttributes: new { @class = "form-control" })
                                                                <label>Shuttle</label>
                                                                <span class="help-block">Enter Shuttle Here</span>
                                                                <i class="fa fa-home"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>


                                        <div class="tab-pane" id="tab_15_2">
                                            <div class="row">
                                                <div class="col-md-2 pull-right">
                                                    <input id="addPiano" class="btn-default btn  pull-right" value="Add Piano">
                                                </div>
                                            </div>

                                            <div id="pianoContainer">
                                                @{Model.Pianos.ForEach(piano => Html.RenderPartial("Editors/_Piano", piano));}
                                            </div>
                                        </div>

                                        <div class="tab-pane" id="tab_15_3">
                                            <!-- Services -->
                                            <div class="row" style="margin-top: 5px">
                                                <div class="col-md-12">

                                                    <div class="portlet light bordered">
                                                        <div class="portlet-title">
                                                            <div class="caption font-blue-steel">
                                                                <i class="icon-settings font-blue-steel"></i>
                                                                <span class="caption-subject bold uppercase"> Other Services</span>
                                                            </div>
                                                            <div class="actions">
                                                                <a class="btn btn-circle btn-icon-only btn-default fullscreen" href="javascript:;" data-original-title="" title=""> </a>
                                                            </div>
                                                        </div>
                                                        <div class="portlet-body form">

                                                            <div class="row">
                                                                <div class="col-md-2 pull-right">
                                                                    <input id="addServices" class="btn-default btn pull-right" value="Add Service">
                                                                </div>

                                                            </div>
                                                            <div class="form-body" id="serviceContainer">
                                                                <!--Services-->
                                                                @{Model.Services.ForEach(service => Html.RenderPartial("Editors/_Services", service));}

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" style="margin-top: 5px">
                                                <div class="col-md-12">
                                                    <div class="col-md-6">
                                                        <div class="form-group form-md-line-input has-success">
                                                            <div class="input-icon">
                                                                @Html.DropDownListFor(model => model.PaymentOption, ViewBag.PaymentOption as SelectList, htmlAttributes: new { @class = "form-control", onchange = "pianoConfigs.initShowPaymentData(this)" })
                                                                <label>Payment Option<span class="required">*</span></label>
                                                                @Html.ValidationMessageFor(model => model.PaymentOption, null, new { @class = "help-block help-block-error" })
                                                                <span class="help-block">Select Payment Option</span>
                                                                <i class="fa fa-dollar"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12 amountDetails" style="display:none">
                                                    <div class="col-md-6">
                                                        <div class="form-group form-md-line-input has-success">
                                                            <div class="input-icon">
                                                                @Html.EditorFor(model => model.CollectableAmount, new { htmlAttributes = new { @class = "form-control" } })
                                                                <label>Amount to be collected</label>
                                                                <span class="help-block">Enter Collectable Amount</span>
                                                                <i class="fa fa-dollar"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12 staffDetails" style="display:none">
                                                    <div class="col-md-6">
                                                        <div class="form-group form-md-line-input has-success">
                                                            <div class="input-icon">
                                                                @Html.EditorFor(model => model.OfficeStaffDetails, new { htmlAttributes = new { @class = "form-control" } })
                                                                <label>Office Staff</label>
                                                                <span class="help-block">Enter Office Staff Details</span>
                                                                <i class="fa fa-dollar"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12 paymentDetails" style="display:none">
                                                    <div class="col-md-6">
                                                        <div class="form-group form-md-line-input has-success">
                                                            <div class="input-icon">
                                                                @Html.EditorFor(model => model.OnlinePaymentDetails, new { htmlAttributes = new { @class = "form-control" } })
                                                                <label>Online Payment</label>
                                                                <span class="help-block">Enter Online Payment Details</span>
                                                                <i class="fa fa-dollar"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>


                                    <!-- End Services  -->
                                </div>
                            </div>
                        </div>
                    </div>


                                <div class="form-actions noborder">
                                    <button type="submit" class="btn blue-steel ">Save Order</button>
                                    <a href="/Orders" class="btn c-btn-border-1x c-btn-blue-steel">Cancel</a>
                                </div>

                                                                    }
                <!-- END SAMPLE FORM PORTLET-->
            </div>

        </div>

        <!-- END PAGE BASE CONTENT -->
    </div>
    <!-- END CONTENT BODY -->
</div>
<!-- END CONTENT -->

<script type="text/javascript">

    var pianoConfigs = function () {

        handleShowData = function (elem) {
            var pianoTypeSize = $(elem).parent().parent().parent().parent().parent().find('div.pianoTypeSize');
            var pianoBenchPlayer = $(elem).parent().parent().parent().parent().parent().find('div.pianoBenchPlayer');
            var pianoMakeModel = $(elem).parent().parent().parent().parent().parent().find('div.pianoMakeModel');

            if (elem.value == "0") {
                pianoTypeSize.slideDown("fast", function () {
                    pianoBenchPlayer.slideDown("fast", function () {
                        pianoMakeModel.slideUp("fast", function () {

                        });
                    });
                });
            }
            else if (elem.value == "1") {
                pianoMakeModel.slideDown("fast", function () {
                    pianoBenchPlayer.slideDown("fast", function () {
                        pianoTypeSize.slideUp("fast", function () {

                        });
                    });
                });
            }
            else if (elem.value == "2") {

                pianoTypeSize.slideDown("fast", function () {
                    pianoMakeModel.slideDown("fast", function () {
                        pianoBenchPlayer.slideDown("fast", function () {

                        });
                    });
                });
            }
            else {
                pianoBenchPlayer.slideDown("fast", function () {
                    pianoMakeModel.slideDown("fast", function () {
                        pianoTypeSize.slideUp("fast", function () {

                        });
                    });
                });
            }

        }

        handlePopulateWarehouse = function (elem) {

            var parent = $(elem).parent().parent().parent().parent().parent();

            $.post("/Orders/PopulateWarehouseDetails", { warehouseId: elem.value }, function (data) {
                if (data.key) {
                    parent.find('.pianoAddress').val(data.warehouse.address);
                    parent.find('.pianoPhone').val(data.warehouse.phone);
                    parent.find('.pianoState').val(data.warehouse.state);
                    parent.find('.pianoCity').val(data.warehouse.city);
                    parent.find('.pianoStairs').val(data.warehouse.stairs);
                    parent.find('.pianoTurns').val(data.warehouse.turns);
                    parent.find('.pianoName').val(data.warehouse.name);
                    parent.find('.pianoAltName').val(data.warehouse.altName);
                    parent.find('.pianoAltPhone').val(data.warehouse.altPhone);
                    parent.find('.pianoPostCode').val(data.warehouse.postCode);

                }
               
            });
        }

        handlePopulatePiano = function (elem) {

            var parent = $(elem).parent().parent().parent().parent().parent();

            if (event.keyCode == 13) {
                $.post("/Orders/PopulatePiano", { pianoSerialNumber: elem.value }, function (data) {
                    if (data.key) {
                        parent.find('.pianoType').val(data.piano.type);
                        parent.find('.pianoCategory').val(2);
                        parent.find('.pianoCategory').trigger('change');

                        parent.find('.pianoMake').val(data.piano.make);
                        parent.find('.pianoModel').val(data.piano.model);
                        parent.find('.pianoSize').val(data.piano.size);
                        parent.find('.pianoType').val(data.piano.type);

                        parent.find('.pianoCategory').val(2);
                        

                        //parent.find('.').val(data.piano.isBoxed);
                        //parent.find('.').val(data.piano.isBench);
                        //parent.find('.').val(data.piano.isPlayer);

                    }
                });
            }
        }

        handlePopulateServiceCharges = function (elem) {
            var parent = $(elem).parent().parent().parent();

            $.post("/Orders/PopulateServiceCharges", { pianoServiceCode: elem.value }, function (data) {
                debugger
                if (data.key) {
                    var asd = parent.find('.serviceCharges');
                    parent.find('.serviceCharges').val(data.charges);
                }
            });
        };



        handleFormBegin = function (data) {
            debugger
            if ($("#frm").valid()) {
                return true;
            }
            return false;
        };


        handleFormComplete = function (data) {
            if (data.key) {
                $("#frm").get(0).reset();
            }
            else {
                showToaster({
                    msg: "There was an error please try later",
                    priority: 'error'
                });
            }
        };

        handleShowPaymentData = function (elem) {
            if (elem.value == "0") {
                $('.amountDetails').slideDown("fast", function () {
                    $('.staffDetails').slideUp("fast", function () {
                        $('.paymentDetails').slideUp("fast", function () {

                        });
                    });
                });
            }
            else if (elem.value == "1") {
                $('.staffDetails').slideDown("fast", function () {
                    $('.amountDetails').slideUp("fast", function () {
                        $('.paymentDetails').slideUp("fast", function () {

                        });
                    });
                });
            }
            else if (elem.value == "2") {

                $('.paymentDetails').slideDown("fast", function () {
                    $('.amountDetails').slideUp("fast", function () {
                        $('.staffDetails').slideUp("fast", function () {

                        });
                    });
                });
            }
            else {
                $('.paymentDetails').slideUp("fast", function () {
                    $('.amountDetails').slideUp("fast", function () {
                        $('.staffDetails').slideUp("fast", function () {

                        });
                    });
                });
            }
        };

        return {

            initShowData: function (elem) {
                handleShowData(elem);
            },
            initPopulateWarehouse: function (elem) {
                handlePopulateWarehouse(elem);
            },
            initPopulatePiano: function (elem) {
                handlePopulatePiano(elem);
            },
            initPopulateServiceCharges: function (elem) {
                handlePopulateServiceCharges(elem);
            },
            initFormComplete: function (data) {
                handleFormComplete(data);
            },
            initFormBegin: function () {
                return handleFormBegin();
            },
            initShowPaymentData: function (data) {
                handleShowPaymentData(data);
            }
            

        }
    }();



    $('.date-picker').datetimepicker({
        format: 'M/DD/YYYY hh:mm A'
    });



    $('#addPiano').click(function (e) {
        debugger
        $.get('/Orders/NewPiano', function (template) {
            $('#pianoContainer').append(template);

            var form = $("#frm");
            form.removeData("validator");
            form.removeData("unobtrusiveValidation");
            $.validator.unobtrusive.parse(form);
            form.validate();
        });

        e.preventDefault();
    });

    $('#addServices').click(function (e) {
        debugger
        $.get('/Orders/NewService', function (template) {
            $('#serviceContainer').append(template);

            var form = $("#frm");
            form.removeData("validator");
            form.removeData("unobtrusiveValidation");
            $.validator.unobtrusive.parse(form);
            form.validate();
        });

        e.preventDefault();
    });


</script>

